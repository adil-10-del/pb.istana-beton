<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tulis Artikel</title>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4;}

nav{
background:#111;
padding:15px 30px;
display:flex;
justify-content:space-between;
align-items:center;
}

nav a{
color:#fff;
text-decoration:none;
margin-left:20px;
font-size:14px;
}

.container{
max-width:700px;
margin:auto;
padding:40px 20px;
}

form{
display:flex;
flex-direction:column;
gap:15px;
}

input,textarea,select{
padding:12px;
border-radius:8px;
border:1px solid #ccc;
}

textarea{min-height:200px;}

button{
padding:12px;
background:#111;
color:#fff;
border:none;
border-radius:8px;
cursor:pointer;
}

.preview img,.preview video{
width:100%;
margin-top:10px;
border-radius:10px;
}
</style>
</head>
<body>

<nav>
<div style="color:#fff;font-weight:bold;">PB. Istana Beton</div>
<div>
<a href="../index.html">Beranda</a>
<a href="../produk/index.html">Produk</a>
<a href="index.html">Artikel</a>
</div>
</nav>

<div class="container">
<h1>Tulis Artikel</h1>

<form id="formArtikel">
<input type="text" id="title" placeholder="Judul Artikel" required>
<input type="text" id="author" placeholder="Nama Penulis" required>
<input type="date" id="date" required>

<select id="category" required>
<option value="">Pilih Kategori</option>
<option>Tips & Tutorial</option>
<option>Edukasi Material</option>
<option>Inspirasi Desain</option>
</select>

<input type="file" id="media" accept="image/*,video/*" required>

<div class="preview" id="preview"></div>

<textarea id="content" placeholder="Isi Artikel..." required></textarea>

<button type="submit">Publikasikan</button>
</form>
</div>

<script src="artikel-data.js"></script>
<script>

let mediaBase64="";
let mediaType="";

const mediaInput=document.getElementById("media");
const preview=document.getElementById("preview");

mediaInput.addEventListener("change",function(){
const file=this.files[0];
if(!file)return;

const reader=new FileReader();

reader.onload=function(e){
mediaBase64=e.target.result;
mediaType=file.type;

if(mediaType.startsWith("image")){
preview.innerHTML=`<img src="${mediaBase64}">`;
}else{
preview.innerHTML=`<video src="${mediaBase64}" controls></video>`;
}
};

reader.readAsDataURL(file);
});

document.getElementById("formArtikel")
.addEventListener("submit",function(e){

e.preventDefault();

const newArticle={
id:Date.now().toString(),
title:title.value,
author:author.value,
date:date.value,
category:category.value,
media:mediaBase64,
mediaType:mediaType,
content:"<p>"+content.value.replace(/\n/g,"</p><p>")+"</p>"
};

let local=JSON.parse(localStorage.getItem("articles"))||[];
local.push(newArticle);
localStorage.setItem("articles",JSON.stringify(local));

alert("Artikel berhasil dipublikasikan!");
window.location.href="index.html";

});
</script>

</body>
</html>




